<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>PersistentObjectSchemaUpdater (DellRoad Stuff 3.0.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.dellroad.stuff.pobj, class: PersistentObjectSchemaUpdater">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/PersistentObjectSchemaUpdater.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.dellroad.stuff.pobj</a></div>
<h1 title="Class PersistentObjectSchemaUpdater" class="title">Class PersistentObjectSchemaUpdater&lt;T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">org.dellroad.stuff.schema.AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;
<div class="inheritance">org.dellroad.stuff.pobj.PersistentObjectSchemaUpdater&lt;T&gt;</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - type of the root persistent object</dd>
</dl>
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;</code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="SpringPersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj">SpringPersistentObjectSchemaUpdater</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">PersistentObjectSchemaUpdater&lt;T&gt;</span>
<span class="extends-implements">extends <a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;
implements <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;</span></div>
<div class="block">A <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a> that is also a <a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> that automatically
 applies needed updates to the persistent XML file.

 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/prism.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/components/prism-xml-doc.min.js"></script>
 <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism.min.css" rel="stylesheet"/>

 <p>
 To use this class, wrap your normal delegate in an instance of this class. This will augment
 the serialization and deserialization process to keep track of which updates have been applied to the XML structure,
 and automatically and transparently apply any needed updates during deserialization.

 <p>
 Updates are tracked by inserting an <code><a href="#UPDATES_ELEMENT_NAME"><code>&lt;pobj:updates&gt;</code></a></code> element
 into the serialized XML document; this update list is transparently removed when the document is read back,
 and any missing updates are applied automatically.
 In this way the document and its set of applied updates always travel together. For example:

 <pre><code class="language-xml">
  &lt;MyConfig&gt;
      <b>&lt;pobj:updates xmlns:pobj="http://dellroad-stuff.googlecode.com/ns/persistentObject"&gt;
          &lt;pobj:update&gt;some-update-name-1&lt;/pobj:update&gt;
          &lt;pobj:update&gt;some-update-name-2&lt;/pobj:update&gt;
      &lt;/pobj:updates&gt;</b>
      &lt;username&gt;admin&lt;/username&gt;
      &lt;password&gt;secret&lt;/password&gt;
  &lt;/MyConfig&gt;
 </code></pre>

 <p>
 For Spring applications, <a href="SpringPersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>SpringPersistentObjectSchemaUpdater</code></a> provides a convenient declarative way
 to define your schema updates via XSLT files.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected final <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#delegate" class="member-name-link">delegate</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#NAMESPACE_URI" class="member-name-link">NAMESPACE_URI</a></code></div>
<div class="col-last odd-row-color">
<div class="block">XML namespace URI used for nested update elements.</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/namespace/QName.html" title="class or interface in javax.xml.namespace" class="external-link">QName</a></code></div>
<div class="col-second even-row-color"><code><a href="#UPDATE_ELEMENT_NAME" class="member-name-link">UPDATE_ELEMENT_NAME</a></code></div>
<div class="col-last even-row-color">
<div class="block">XML element name for a single update.</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/namespace/QName.html" title="class or interface in javax.xml.namespace" class="external-link">QName</a></code></div>
<div class="col-second odd-row-color"><code><a href="#UPDATES_ELEMENT_NAME" class="member-name-link">UPDATES_ELEMENT_NAME</a></code></div>
<div class="col-last odd-row-color">
<div class="block">XML element name for the updates list.</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#XML_PREFIX" class="member-name-link">XML_PREFIX</a></code></div>
<div class="col-last even-row-color">
<div class="block">Preferred XML namespace prefix for <a href="#NAMESPACE_URI"><code>NAMESPACE_URI</code></a> elements.</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/namespace/QName.html" title="class or interface in javax.xml.namespace" class="external-link">QName</a></code></div>
<div class="col-second odd-row-color"><code><a href="#XMLNS_ATTRIBUTE_NAME" class="member-name-link">XMLNS_ATTRIBUTE_NAME</a></code></div>
<div class="col-last odd-row-color">
<div class="block">XML namespace URI used for namespace declarations.</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.dellroad.stuff.schema.AbstractSchemaUpdater">Fields inherited from class&nbsp;org.dellroad.stuff.schema.<a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a></h3>
<code><a href="../schema/AbstractSchemaUpdater.html#log">log</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.dellroad.stuff.pobj.PersistentObjectDelegate)" class="member-name-link">PersistentObjectSchemaUpdater</a><wbr>(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;&nbsp;delegate)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#commitTransaction(org.dellroad.stuff.pobj.PersistentFileTransaction)" class="member-name-link">commitTransaction</a><wbr>(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Commit a previously opened transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#copy(T)" class="member-name-link">copy</a><wbr>(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;original)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Make a deep copy of the given object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#databaseNeedsInitialization(org.dellroad.stuff.pobj.PersistentFileTransaction)" class="member-name-link">databaseNeedsInitialization</a><wbr>(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if the database needs initialization.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deserialize(javax.xml.transform.Source)" class="member-name-link">deserialize</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/Source.html" title="class or interface in javax.xml.transform" class="external-link">Source</a>&nbsp;source)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deserialize object from XML.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAppliedUpdateNames(org.dellroad.stuff.pobj.PersistentFileTransaction)" class="member-name-link">getAppliedUpdateNames</a><wbr>(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine which updates have already been applied to the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDefaultValue()" class="member-name-link">getDefaultValue</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the default value for the root object graph.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#handleWritebackException(org.dellroad.stuff.pobj.PersistentObject,java.lang.Throwable)" class="member-name-link">handleWritebackException</a><wbr>(<a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj">PersistentObject</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;&nbsp;pobj,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Handle an exception thrown during a delayed write-back attempt.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeDatabase(org.dellroad.stuff.pobj.PersistentFileTransaction)" class="member-name-link">initializeDatabase</a><wbr>(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initialize an uninitialized database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isSameGraph(T,T)" class="member-name-link">isSameGraph</a><wbr>(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;root1,
 <a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;root2)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Compare two object graphs.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#openTransaction(org.dellroad.stuff.pobj.PersistentFileTransaction)" class="member-name-link">openTransaction</a><wbr>(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Begin a transaction on the given database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#recordUpdateApplied(org.dellroad.stuff.pobj.PersistentFileTransaction,java.lang.String)" class="member-name-link">recordUpdateApplied</a><wbr>(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Record an update as having been applied to the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#rollbackTransaction(org.dellroad.stuff.pobj.PersistentFileTransaction)" class="member-name-link">rollbackTransaction</a><wbr>(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Roll back a previously opened transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#serialize(T,javax.xml.transform.Result)" class="member-name-link">serialize</a><wbr>(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;obj,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/Result.html" title="class or interface in javax.xml.transform" class="external-link">Result</a>&nbsp;result)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Serialize object to XML.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTransformerFactory(javax.xml.transform.TransformerFactory)" class="member-name-link">setTransformerFactory</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/TransformerFactory.html" title="class or interface in javax.xml.transform" class="external-link">TransformerFactory</a>&nbsp;transformerFactory)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/TransformerFactory.html" title="class or interface in javax.xml.transform" class="external-link"><code>TransformerFactory</code></a> to be used by this instance when reading the updates from the XML file.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;jakarta.validation.ConstraintViolation&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#validate(T)" class="member-name-link">validate</a><wbr>(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;obj)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Validate the given instance.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.dellroad.stuff.schema.AbstractSchemaUpdater">Methods inherited from class&nbsp;org.dellroad.stuff.schema.<a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a></h3>
<code><a href="../schema/AbstractSchemaUpdater.html#apply(T,org.dellroad.stuff.schema.DatabaseAction)">apply</a>, <a href="../schema/AbstractSchemaUpdater.html#applyInTransaction(D,org.dellroad.stuff.schema.DatabaseAction)">applyInTransaction</a>, <a href="../schema/AbstractSchemaUpdater.html#generateMultiUpdateName(org.dellroad.stuff.schema.SchemaUpdate,int)">generateMultiUpdateName</a>, <a href="../schema/AbstractSchemaUpdater.html#getAllUpdateNames()">getAllUpdateNames</a>, <a href="../schema/AbstractSchemaUpdater.html#getOrderingTieBreaker()">getOrderingTieBreaker</a>, <a href="../schema/AbstractSchemaUpdater.html#getUpdates()">getUpdates</a>, <a href="../schema/AbstractSchemaUpdater.html#initializeAndUpdateDatabase(D)">initializeAndUpdateDatabase</a>, <a href="../schema/AbstractSchemaUpdater.html#isIgnoreUnrecognizedUpdates()">isIgnoreUnrecognizedUpdates</a>, <a href="../schema/AbstractSchemaUpdater.html#isValidUpdateName(java.lang.String)">isValidUpdateName</a>, <a href="../schema/AbstractSchemaUpdater.html#setIgnoreUnrecognizedUpdates(boolean)">setIgnoreUnrecognizedUpdates</a>, <a href="../schema/AbstractSchemaUpdater.html#setUpdates(java.util.Collection)">setUpdates</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="NAMESPACE_URI">
<h3>NAMESPACE_URI</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">NAMESPACE_URI</span></div>
<div class="block">XML namespace URI used for nested update elements.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.dellroad.stuff.pobj.PersistentObjectSchemaUpdater.NAMESPACE_URI">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="XML_PREFIX">
<h3>XML_PREFIX</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">XML_PREFIX</span></div>
<div class="block">Preferred XML namespace prefix for <a href="#NAMESPACE_URI"><code>NAMESPACE_URI</code></a> elements.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.dellroad.stuff.pobj.PersistentObjectSchemaUpdater.XML_PREFIX">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="UPDATES_ELEMENT_NAME">
<h3>UPDATES_ELEMENT_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/namespace/QName.html" title="class or interface in javax.xml.namespace" class="external-link">QName</a></span>&nbsp;<span class="element-name">UPDATES_ELEMENT_NAME</span></div>
<div class="block">XML element name for the updates list.</div>
</section>
</li>
<li>
<section class="detail" id="UPDATE_ELEMENT_NAME">
<h3>UPDATE_ELEMENT_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/namespace/QName.html" title="class or interface in javax.xml.namespace" class="external-link">QName</a></span>&nbsp;<span class="element-name">UPDATE_ELEMENT_NAME</span></div>
<div class="block">XML element name for a single update.</div>
</section>
</li>
<li>
<section class="detail" id="XMLNS_ATTRIBUTE_NAME">
<h3>XMLNS_ATTRIBUTE_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/namespace/QName.html" title="class or interface in javax.xml.namespace" class="external-link">QName</a></span>&nbsp;<span class="element-name">XMLNS_ATTRIBUTE_NAME</span></div>
<div class="block">XML namespace URI used for namespace declarations.</div>
</section>
</li>
<li>
<section class="detail" id="delegate">
<h3>delegate</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</span>&nbsp;<span class="element-name">delegate</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.dellroad.stuff.pobj.PersistentObjectDelegate)">
<h3>PersistentObjectSchemaUpdater</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">PersistentObjectSchemaUpdater</span><wbr><span class="parameters">(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;&nbsp;delegate)</span></div>
<div class="block">Constructor.

 <p>
 Callers provide a <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a> that will be used for all operations, with the exception
 that <a href="#serialize(T,javax.xml.transform.Result)">serialization</a> and <a href="#deserialize(javax.xml.transform.Source)">deserialization</a> will add/remove
 the upate list, and <a href="#deserialize(javax.xml.transform.Source)">deserialization</a> will apply any needed updates as necessary.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>delegate</code> - delegate that will be wrapped by this instance</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>delegate</code> is null</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setTransformerFactory(javax.xml.transform.TransformerFactory)">
<h3>setTransformerFactory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setTransformerFactory</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/TransformerFactory.html" title="class or interface in javax.xml.transform" class="external-link">TransformerFactory</a>&nbsp;transformerFactory)</span></div>
<div class="block">Configure the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/TransformerFactory.html" title="class or interface in javax.xml.transform" class="external-link"><code>TransformerFactory</code></a> to be used by this instance when reading the updates from the XML file.
 Must support reading from a StAX <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/Source.html" title="class or interface in javax.xml.transform" class="external-link"><code>Source</code></a>.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> returns null.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transformerFactory</code> - <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/TransformerFactory.html" title="class or interface in javax.xml.transform" class="external-link"><code>TransformerFactory</code></a> to use or null for the platform default</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="copy(T)">
<h3 id="copy(java.lang.Object)">copy</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a></span>&nbsp;<span class="element-name">copy</span><wbr><span class="parameters">(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;original)</span></div>
<div class="block">Make a deep copy of the given object.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> delegates to the delegate provided in the constructor.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="PersistentObjectDelegate.html#copy(T)">copy</a></code>&nbsp;in interface&nbsp;<code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>original</code> - original object</dd>
<dt>Returns:</dt>
<dd>deep copy of the object graph rooted at <code>original</code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>original</code> is null</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isSameGraph(T,T)">
<h3 id="isSameGraph(java.lang.Object,java.lang.Object)">isSameGraph</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSameGraph</span><wbr><span class="parameters">(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;root1,
 <a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;root2)</span></div>
<div class="block">Compare two object graphs.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> delegates to the delegate provided in the constructor.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="PersistentObjectDelegate.html#isSameGraph(T,T)">isSameGraph</a></code>&nbsp;in interface&nbsp;<code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>root1</code> - root of first object graph</dd>
<dd><code>root2</code> - root of second object graph</dd>
<dt>Returns:</dt>
<dd>true if <code>root1</code> and <code>root2</code> represent equal object graphs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validate(T)">
<h3 id="validate(java.lang.Object)">validate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;jakarta.validation.ConstraintViolation&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;&gt;</span>&nbsp;<span class="element-name">validate</span><wbr><span class="parameters">(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;obj)</span></div>
<div class="block">Validate the given instance.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> delegates to the delegate provided in the constructor.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="PersistentObjectDelegate.html#validate(T)">validate</a></code>&nbsp;in interface&nbsp;<code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>obj</code> - root object</dd>
<dt>Returns:</dt>
<dd>set of zero or more constraint violations</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>obj</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="handleWritebackException(org.dellroad.stuff.pobj.PersistentObject,java.lang.Throwable)">
<h3>handleWritebackException</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">handleWritebackException</span><wbr><span class="parameters">(<a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj">PersistentObject</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;&nbsp;pobj,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</span></div>
<div class="block">Handle an exception thrown during a delayed write-back attempt.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> delegates to the delegate provided in the constructor.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="PersistentObjectDelegate.html#handleWritebackException(org.dellroad.stuff.pobj.PersistentObject,java.lang.Throwable)">handleWritebackException</a></code>&nbsp;in interface&nbsp;<code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>pobj</code> - the instance that encountered the exception</dd>
<dd><code>t</code> - the exception thrown</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDefaultValue()">
<h3>getDefaultValue</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a></span>&nbsp;<span class="element-name">getDefaultValue</span>()</div>
<div class="block">Get the default value for the root object graph.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> delegates to the delegate provided in the constructor.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="PersistentObjectDelegate.html#getDefaultValue()">getDefaultValue</a></code>&nbsp;in interface&nbsp;<code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>root object initial value, or null if there is no default value</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="serialize(T,javax.xml.transform.Result)">
<h3 id="serialize(java.lang.Object,javax.xml.transform.Result)">serialize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">serialize</span><wbr><span class="parameters">(<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&nbsp;obj,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/Result.html" title="class or interface in javax.xml.transform" class="external-link">Result</a>&nbsp;result)</span>
               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Serialize object to XML.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> delegates to the delegate provided in the constructor
 but also adds the update list as the first XML tag.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="PersistentObjectDelegate.html#serialize(T,javax.xml.transform.Result)">serialize</a></code>&nbsp;in interface&nbsp;<code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>obj</code> - object to serialize; must not be modified</dd>
<dd><code>result</code> - XML destination</dd>
<dt>Throws:</dt>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if an I/O error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deserialize(javax.xml.transform.Source)">
<h3>deserialize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a></span>&nbsp;<span class="element-name">deserialize</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/transform/Source.html" title="class or interface in javax.xml.transform" class="external-link">Source</a>&nbsp;source)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Deserialize object from XML.

 <p>
 The implementation in <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> delegates to the delegate provided in the constructor
 but also removes the update list as the first XML tag and applies any needed updates.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="PersistentObjectDelegate.html#deserialize(javax.xml.transform.Source)">deserialize</a></code>&nbsp;in interface&nbsp;<code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObjectSchemaUpdater.html" title="type parameter in PersistentObjectSchemaUpdater">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>source</code> - XML source</dd>
<dt>Returns:</dt>
<dd>deserialized object</dd>
<dt>Throws:</dt>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if an I/O error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="databaseNeedsInitialization(org.dellroad.stuff.pobj.PersistentFileTransaction)">
<h3>databaseNeedsInitialization</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">databaseNeedsInitialization</span><wbr><span class="parameters">(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</span>
                                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html#databaseNeedsInitialization(T)">AbstractSchemaUpdater</a></code></span></div>
<div class="block">Determine if the database needs initialization.

 <p>
 If so, <a href="../schema/AbstractSchemaUpdater.html#initializeDatabase(T)"><code>AbstractSchemaUpdater.initializeDatabase(T)</code></a> will eventually be invoked.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../schema/AbstractSchemaUpdater.html#databaseNeedsInitialization(T)">databaseNeedsInitialization</a></code>&nbsp;in class&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dt>Returns:</dt>
<dd>true if the database needs initialization</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeDatabase(org.dellroad.stuff.pobj.PersistentFileTransaction)">
<h3>initializeDatabase</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeDatabase</span><wbr><span class="parameters">(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</span>
                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html#initializeDatabase(T)">AbstractSchemaUpdater</a></code></span></div>
<div class="block">Initialize an uninitialized database. This should create and initialize the database schema and content,
 including whatever portion of that is used to track schema updates.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../schema/AbstractSchemaUpdater.html#initializeDatabase(T)">initializeDatabase</a></code>&nbsp;in class&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="openTransaction(org.dellroad.stuff.pobj.PersistentFileTransaction)">
<h3>openTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a></span>&nbsp;<span class="element-name">openTransaction</span><wbr><span class="parameters">(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</span>
                                             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html#openTransaction(D)">AbstractSchemaUpdater</a></code></span></div>
<div class="block">Begin a transaction on the given database.
 The transaction will always eventually either be
 <a href="../schema/AbstractSchemaUpdater.html#commitTransaction(T)">committed</a> or <a href="../schema/AbstractSchemaUpdater.html#rollbackTransaction(T)">rolled back</a>.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../schema/AbstractSchemaUpdater.html#openTransaction(D)">openTransaction</a></code>&nbsp;in class&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - database</dd>
<dt>Returns:</dt>
<dd>transaction handle</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commitTransaction(org.dellroad.stuff.pobj.PersistentFileTransaction)">
<h3>commitTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">commitTransaction</span><wbr><span class="parameters">(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html#commitTransaction(T)">AbstractSchemaUpdater</a></code></span></div>
<div class="block">Commit a previously opened transaction.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../schema/AbstractSchemaUpdater.html#commitTransaction(T)">commitTransaction</a></code>&nbsp;in class&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction previously returned from <a href="../schema/AbstractSchemaUpdater.html#openTransaction(D)"><code>openTransaction()</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rollbackTransaction(org.dellroad.stuff.pobj.PersistentFileTransaction)">
<h3>rollbackTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">rollbackTransaction</span><wbr><span class="parameters">(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html#rollbackTransaction(T)">AbstractSchemaUpdater</a></code></span></div>
<div class="block">Roll back a previously opened transaction.
 This method will also be invoked if <a href="../schema/AbstractSchemaUpdater.html#commitTransaction(T)"><code>commitTransaction()</code></a> throws an exception.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../schema/AbstractSchemaUpdater.html#rollbackTransaction(T)">rollbackTransaction</a></code>&nbsp;in class&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction previously returned from <a href="../schema/AbstractSchemaUpdater.html#openTransaction(D)"><code>openTransaction()</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAppliedUpdateNames(org.dellroad.stuff.pobj.PersistentFileTransaction)">
<h3>getAppliedUpdateNames</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getAppliedUpdateNames</span><wbr><span class="parameters">(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction)</span>
                                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html#getAppliedUpdateNames(T)">AbstractSchemaUpdater</a></code></span></div>
<div class="block">Determine which updates have already been applied to the database.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../schema/AbstractSchemaUpdater.html#getAppliedUpdateNames(T)">getAppliedUpdateNames</a></code>&nbsp;in class&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dt>Returns:</dt>
<dd>set of already-applied updates</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recordUpdateApplied(org.dellroad.stuff.pobj.PersistentFileTransaction,java.lang.String)">
<h3>recordUpdateApplied</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordUpdateApplied</span><wbr><span class="parameters">(<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html#recordUpdateApplied(T,java.lang.String)">AbstractSchemaUpdater</a></code></span></div>
<div class="block">Record an update as having been applied to the database.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../schema/AbstractSchemaUpdater.html#recordUpdateApplied(T,java.lang.String)">recordUpdateApplied</a></code>&nbsp;in class&nbsp;<code><a href="../schema/AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema">AbstractSchemaUpdater</a>&lt;<a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>,<wbr><a href="PersistentFileTransaction.html" title="class in org.dellroad.stuff.pobj">PersistentFileTransaction</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dd><code>name</code> - update name</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the update has already been recorded in the database</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
