<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>PersistentObject (DellRoad Stuff 2.5.9 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PersistentObject (DellRoad Stuff 2.5.9 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":9,"i20":9,"i21":9,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":9,"i39":9,"i40":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PersistentObject.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.dellroad.stuff.pobj</a></div>
<h2 title="Class PersistentObject" class="title">Class PersistentObject&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.dellroad.stuff.pobj.PersistentObject&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - type of the root object</dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">PersistentObject&lt;T&gt;</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Main class for Simple XML Persistence Objects (POBJ).

 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/prism.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/components/prism-java.min.js"></script>
 <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism.min.css" rel="stylesheet"/>

 <h3>Overview</h3>

 <p>
 A <a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> instance manages an in-memory database with ACID semantics and strict validation that is
 represented by a regular Java object graph (i.e., a root Java object and all of the other objects that it (indirectly)
 references). The object graph can be (de)serialized to/from XML, and this XML representation is used for persistence
 in the file system. The backing XML file is read in at initialization time and updated after each change.

 <p>
 All changes required copying the entire object graph, and are atomic and strictly serialized. In other words, the
 entire object graph is read and written by value. On the filesystem, the persistent XML file
 is updated by writing out a new, temporary copy and renaming the copy onto the original, using <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true#renameTo(java.io.File)" title="class or interface in java.io" class="externalLink"><code>File.renameTo()</code></a> so that changes are also atomic from a filesystem perspective, i.e., it's not possible to open an
 invalid or partial XML file (assuming filesystem renames are atomic, e.g., all UNIX variants). This class also
 supports information flowing in the other direction, where we pick up "out of band" updates to the XML file (see below).

 <p>
 This class is most appropriate for use with information that must be carefully controlled and validated,
 but that doesn't change frequently. Configuration information for an application stored in a <code>config.xml</code>
 file is a typical use case; beans whose behavior is determined by the configured information can subclass
 <a href="AbstractConfiguredBean.html" title="class in org.dellroad.stuff.pobj"><code>AbstractConfiguredBean</code></a> and have their lifecycles managed automatically.

 <p>
 Because each change involves copying of the entire graph, an efficient graph copy operation is desirable.
 The <a href="AbstractDelegate.html#copy(T)">default method</a> is to serialize and then deserialize the object graph
 to/from XML in memory. See <a href="../java/GraphCloneable.html" title="interface in org.dellroad.stuff.java"><code>GraphCloneable</code></a> for a much more efficient approach.

 <h3>Validation</h3>

 <p>
 Validation is peformed in Java (not in XML) and defined by the provided <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a>. This delegate
 guarantees that only a valid root Java object can be read or written. Setting an invalid Java root object via
 <a href="#setRoot(T,long,boolean)"><code>setRoot()</code></a> with throw an exception; reading an invalid XML file on disk will generate
 an error (or be ignored; see "Empty Starts" below).

 <h3>Update Details</h3>

 <p>
 When the object graph is updated, it must pass validation checks, and then the persistent XML file is updated and
 listener notifications are sent out. Listeners are always notified in a separate thread from the one that invoked
 <a href="#setRoot(T,long,boolean)"><code>setRoot()</code></a>. Support for delayed write-back of the persistent XML file is included: this
 allows modifications that occur in rapid succession to be consolidated into a single filesystem write operation.

 <p>
 Support for optimistic locking is included. There is a "current version" number which is incremented each
 time the object graph is updated; writes may optionally specify this number to ensure no intervening changes
 have occurred. If concurrent updates are expected, applications may choose to implement a 3-way merge algorithm
 of some kind to handle optimistic locking failures.

 <p>
 To implement a truly atomic read-modify-write operation without the possibility of locking failure, simply
 synchronize on this instance, e.g.:
  <pre><code class="language-java">
  synchronized (pobj) {
      MyRoot root = pboj.getRoot();
      root.setFoobar("new value");    // or whatever else we want to modify
      pobj.setRoot(root);
  }
  </code></pre>

 <p>
 Instances can also be configured to automatically preserve one or more backup copies of the persistent file on systems that
 support hard links (see <a href="../io/FileStreamRepository.html" title="class in org.dellroad.stuff.io"><code>FileStreamRepository</code></a>). Set the <a href="#getNumBackups()"><code>numBackups</code></a> property to enable.

 <h3>"Out-of-band" Writes</h3>

 <p>
 When a non-zero <a href="#getCheckInterval()">check interval</a> is configured, instances support "out-of-band" writes
 directly to the XML persistent file by some other process. This can be handy in cases where the other process (perhaps hand
 edits) is updating the persistent file and you want to have the running Java process pick up the changes just as if
 <a href="#setRoot(T,long,boolean)"><code>setRoot()</code></a> had been invoked. In particular, instances will detect the appearance
 of a newly appearing persistent file after has starting without one (see "empty starts" below). In all cases, persistent
 objects must properly validate. To avoid reading a partial file the external process should write the file atomically by
 creating a temporary file and renaming it; however, this race window is small and in any case the problem is self-correcting
 because a partially written XML file will not validate, and so it will be ignored and retried after another
 <a href="#getCheckInterval()">check interval</a> milliseconds has passed.

 <p>
 A special case of this is effected when <a href="#setRoot(T,long,boolean)"><code>setRoot()</code></a> is never explicitly invoked
 by the application. Then some other process must be responsible for all database updates via XML file, and this class
 will automatically pick them up, validate them, and send out notifications to listeners.

 <h3>Empty Starts and Stops</h3>

 <p>
 An "empty start" occurs when an instance is <a href="#start()">started</a> but the persistent XML file is either missing,
 does not validate, or cannot be read for some other reason. In such cases, the instance will start with no object graph,
 and <a href="#getRoot()"><code>getRoot()</code></a> will return null. This situation will correct itself as soon as the object graph is written via
 <a href="#setRoot(T,long,boolean)"><code>setRoot()</code></a> or the persistent file appears (effecting an "out-of-band" update). At that time, <a href="#addListener(org.dellroad.stuff.pobj.PersistentObjectListener)">listeners</a> will be notified for the first time, with <a href="PersistentObjectEvent.html#getOldRoot()"><code>PersistentObjectEvent.getOldRoot()</code></a> returning null.

 <p>
 Whether empty starts are allowed is determined by the <a href="#isAllowEmptyStart()"><code>allowEmptyStart</code></a> property (default
 <code>false</code>). When empty starts are disallowed and the persistent XML file cannot be successfully read,
 then <a href="#start()"><code>start()</code></a> will instead throw an immediate <a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectException</code></a>.

 <p>
 Similarly, "empty stops" are allowed when the <a href="#isAllowEmptyStop()"><code>allowEmptyStop</code></a> property is set to <code>true</code>
 (by default it is <code>false</code>). An "empty stop" occurs when a null value is passed to <a href="#setRoot(T,long,boolean)"><code>setRoot()</code></a>
 (note, an invalid XML file appearing on disk does not cause an empty start).
 Subsequent invocations of <a href="#getRoot()"><code>getRoot()</code></a> will return <code>null</code>. The persistent file is <b>not</b>
 modified when null is passed to <a href="#setRoot(T,long,boolean)"><code>setRoot(T, long, boolean)</code></a>. When empty stops are disallowed, then invoking
 <a href="#setRoot(T,long,boolean)"><code>setRoot(T, long, boolean)</code></a> with a <code>null</code> object will result in an <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink"><code>IllegalArgumentException</code></a>.

 <p>
 Allowing empty starts and/or stops essentially creates an "unconfigured" state represented by a null root object.
 When empty starts and empty stops are both disallowed, there is no "unconfigured" state: once started, <a href="#getRoot()"><code>getRoot()</code></a>
 can be relied upon to always return a non-null, validated root object.

 <p>
 See <a href="AbstractConfiguredBean.html" title="class in org.dellroad.stuff.pobj"><code>AbstractConfiguredBean</code></a> for a useful superclass that automatically handles starting and stopping
 based on the state of an associated <a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a>.

 <h3>Shared Roots</h3>

 Each time <a href="#setRoot(T,long,boolean)"><code>setRoot()</code></a> or <a href="#getRoot()"><code>getRoot()</code></a> is invoked, a deep copy of the root object
 is made. This prevents external code from changing any node in the "official" object graph held by this instance,
 and allows invokers of <a href="#getRoot()"><code>getRoot()</code></a> to modify to the returned object graph without affecting other invokers.
 However, there may be cases where this deep copy is an expensive operation in terms of time or memory.
 The <a href="#getSharedRoot()"><code>getSharedRoot()</code></a> method can be used in these situations. This method returns the same
 root object each time it is invoked (this shared root is itself a deep copy of the "official" root). Therefore, only
 the very first invocation pays the price of a copy. However, all invokers of <a href="#getSharedRoot()"><code>getSharedRoot()</code></a>
 must treat the object graph as read-only to avoid each other seeing unexpected changes.

 <h3>Delegate Function</h3>

 <p>
 Instances must be configured with a <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a> that knows how to validate the object graph
 and perform conversions to and from XML. See <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a> and its implementations for details.

 <h3>Schema Changes</h3>

 <p>
 Like any database, the XML schema may evolve over time. The <a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a> class provides a simple
 way to apply and manage schema updates using XSLT transforms.

 <h3>Transaction Manager</h3>

 <p>
 If using Spring, consider using a <a href="PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a> for transactional access to a
 <a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a>, 
<a href="PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectSchemaUpdater</code></a>, 
<a href="PersistentObjectTransactionManager.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectTransactionManager</code></a>, 
<a href="AbstractConfiguredBean.html" title="class in org.dellroad.stuff.pobj"><code>AbstractConfiguredBean</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="PersistentObject.Snapshot.html" title="class in org.dellroad.stuff.pobj">PersistentObject.Snapshot</a></span></code></th>
<td class="colLast">
<div class="block">Holds a "snapshot" of a <a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> root object along with the version number
 corresponding to the snapshot.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://maven.apache.org/ref/3.3.9/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j" class="externalLink">Logger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#log">log</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">PersistentObject</a></span>()</code></th>
<td class="colLast">
<div class="block">Default constructor.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File)">PersistentObject</a></span>&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;delegate,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file)</code></th>
<td class="colLast">
<div class="block">Simplified constructor configuring for immediate write-back and no persistent file checks.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File,long,long)">PersistentObject</a></span>&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;delegate,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file,
                long&nbsp;writeDelay,
                long&nbsp;checkInterval)</code></th>
<td class="colLast">
<div class="block">Constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addListener(org.dellroad.stuff.pobj.PersistentObjectListener)">addListener</a></span>&#8203;(<a href="PersistentObjectListener.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectListener</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Add a listener to be notified each time the object graph changes.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkFile()">checkFile</a></span>()</code></th>
<td class="colLast">
<div class="block">Check the persistent file for an "out-of-band" update.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Result.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink">Result</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createResult(java.io.OutputStream,java.io.File)">createResult</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io" class="externalLink">OutputStream</a>&nbsp;output,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;systemId)</code></th>
<td class="colLast">
<div class="block">Create a <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Result.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink"><code>Result</code></a> targeting the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>OutputStream</code></a>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCheckInterval()">getCheckInterval</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the delay time between periodic checks for changes in the underlying persistent file.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDelegate()">getDelegate</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the configured <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFile()">getFile</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the persistent file containing the XML form of the persisted object.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNumBackups()">getNumBackups</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the number of backup copies to preserve.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="PersistentObject.html" title="type parameter in PersistentObject">T</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRoot()">getRoot</a></span>()</code></th>
<td class="colLast">
<div class="block">Atomically read the root object.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="PersistentObject.Snapshot.html" title="class in org.dellroad.stuff.pobj">PersistentObject.Snapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRootSnapshot()">getRootSnapshot</a></span>()</code></th>
<td class="colLast">
<div class="block">Read the root object (as with <a href="#getRoot()"><code>getRoot()</code></a>) and its version (as with <a href="#getVersion()"><code>getVersion()</code></a>) in one atomic operation.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="PersistentObject.html" title="type parameter in PersistentObject">T</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSharedRoot()">getSharedRoot</a></span>()</code></th>
<td class="colLast">
<div class="block">Get a shared copy of the root object.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="PersistentObject.Snapshot.html" title="class in org.dellroad.stuff.pobj">PersistentObject.Snapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSharedRootSnapshot()">getSharedRootSnapshot</a></span>()</code></th>
<td class="colLast">
<div class="block">Read the shared root object (as with <a href="#getSharedRoot()"><code>getSharedRoot()</code></a>) and its version (as with <a href="#getVersion()"><code>getVersion()</code></a>)
 in one atomic operation.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getVersion()">getVersion</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the version of the current root.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getWriteDelay()">getWriteDelay</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the maximum delay after an update operation before a write-back to the persistent file
 must be initiated.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasRoot()">hasRoot</a></span>()</code></th>
<td class="colLast">
<div class="block">Determine whether this instance has a non-null root object.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isAllowEmptyStart()">isAllowEmptyStart</a></span>()</code></th>
<td class="colLast">
<div class="block">Determine whether this instance should allow an "empty start".</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isAllowEmptyStop()">isAllowEmptyStop</a></span>()</code></th>
<td class="colLast">
<div class="block">Determine whether this instance should allow an "empty stop".</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isStarted()">isStarted</a></span>()</code></th>
<td class="colLast">
<div class="block">Determine whether this instance is started.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#notifyListeners(long,T,T)">notifyListeners</a></span>&#8203;(long&nbsp;newVersion,
               <a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;oldRoot,
               <a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot)</code></th>
<td class="colLast">
<div class="block">Notify listeners of a change in value.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected <a href="PersistentObject.html" title="type parameter in PersistentObject">T</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#read()">read</a></span>()</code></th>
<td class="colLast">
<div class="block">Read the persistent file.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#read(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File,boolean)">read</a></span>&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file,
    boolean&nbsp;validate)</code></th>
<td class="colLast">
<div class="block">Read in a persistent object from the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>File</code></a> using the given delegate.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#read(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.InputStream,boolean)">read</a></span>&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io" class="externalLink">InputStream</a>&nbsp;input,
    boolean&nbsp;validate)</code></th>
<td class="colLast">
<div class="block">Read in a persistent object from the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>InputStream</code></a> using the given delegate.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#read(org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Source,boolean)">read</a></span>&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
    <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Source.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink">Source</a>&nbsp;source,
    boolean&nbsp;validate)</code></th>
<td class="colLast">
<div class="block">Read in a persistent object using the given delegate.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeListener(org.dellroad.stuff.pobj.PersistentObjectListener)">removeListener</a></span>&#8203;(<a href="PersistentObjectListener.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectListener</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Remove a listener added via <a href="#addListener(org.dellroad.stuff.pobj.PersistentObjectListener)"><code>addListener()</code></a>.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAllowEmptyStart(boolean)">setAllowEmptyStart</a></span>&#8203;(boolean&nbsp;allowEmptyStart)</code></th>
<td class="colLast">
<div class="block">Configure whether an "empty start" is allowed.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAllowEmptyStop(boolean)">setAllowEmptyStop</a></span>&#8203;(boolean&nbsp;allowEmptyStop)</code></th>
<td class="colLast">
<div class="block">Configure whether an "empty stop" is allowed.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCheckInterval(long)">setCheckInterval</a></span>&#8203;(long&nbsp;checkInterval)</code></th>
<td class="colLast">
<div class="block">Set the delay time between periodic checks for changes in the underlying persistent file.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setDelegate(org.dellroad.stuff.pobj.PersistentObjectDelegate)">setDelegate</a></span>&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;delegate)</code></th>
<td class="colLast">
<div class="block">Configure the <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a>.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFile(java.io.File)">setFile</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file)</code></th>
<td class="colLast">
<div class="block">Set the persistent file containing the XML form of the persisted object.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setNumBackups(int)">setNumBackups</a></span>&#8203;(int&nbsp;numBackups)</code></th>
<td class="colLast">
<div class="block">Set the number of backup copies to preserve.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setRoot(T)">setRoot</a></span>&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot)</code></th>
<td class="colLast">
<div class="block">Atomically update the root object.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setRoot(T,long)">setRoot</a></span>&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot,
       long&nbsp;expectedVersion)</code></th>
<td class="colLast">
<div class="block">Atomically update the root object.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setRoot(T,long,boolean)">setRoot</a></span>&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot,
       long&nbsp;expectedVersion,
       boolean&nbsp;alreadyValidated)</code></th>
<td class="colLast">
<div class="block">Atomically update the root object.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setWriteDelay(long)">setWriteDelay</a></span>&#8203;(long&nbsp;writeDelay)</code></th>
<td class="colLast">
<div class="block">Set the maximum delay after an update operation before a write-back to the persistent file
 must be initiated.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#start()">start</a></span>()</code></th>
<td class="colLast">
<div class="block">Start this instance.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#stop()">stop</a></span>()</code></th>
<td class="colLast">
<div class="block">Stop this instance.</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">
<div class="block">Get a simple string description of this instance.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#validate(T)">validate</a></span>&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;root)</code></th>
<td class="colLast">
<div class="block">Validate a root object.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#write(T)">write</a></span>&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;obj)</code></th>
<td class="colLast">
<div class="block">Write the persistent file and rotate any backups.</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File)">write</a></span>&#8203;(T&nbsp;root,
     <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
     <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file)</code></th>
<td class="colLast">
<div class="block">Write a persistent object using the given delegate.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.OutputStream)">write</a></span>&#8203;(T&nbsp;root,
     <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
     <a href="https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io" class="externalLink">OutputStream</a>&nbsp;output)</code></th>
<td class="colLast">
<div class="block">Write a persistent object using the given delegate.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Result)">write</a></span>&#8203;(T&nbsp;root,
     <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
     <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Result.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink">Result</a>&nbsp;result)</code></th>
<td class="colLast">
<div class="block">Write a persistent object using the given delegate.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>protected final&nbsp;<a href="https://maven.apache.org/ref/3.3.9/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j" class="externalLink">Logger</a> log</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File,long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PersistentObject</h4>
<pre>public&nbsp;PersistentObject&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;delegate,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file,
                        long&nbsp;writeDelay,
                        long&nbsp;checkInterval)</pre>
<div class="block">Constructor.

 <p>
 The <code>writeDelay</code> is the maximum delay after an update operation before a write-back to the persistent file
 must be initiated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>file</code> - the file used to persist</dd>
<dd><code>writeDelay</code> - write delay in milliseconds, or zero for immediate write-back</dd>
<dd><code>checkInterval</code> - check interval in milliseconds, or zero to disable persistent file checks</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>delegate</code> or <code>file</code> is null</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>writeDelay</code> or <code>checkInterval</code> is negative</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PersistentObject</h4>
<pre>public&nbsp;PersistentObject&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;delegate,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file)</pre>
<div class="block">Simplified constructor configuring for immediate write-back and no persistent file checks.

 <p>
 Equivalent to:
 <blockquote><code>
  PersistentObject(delegate, file, 0L, 0L);
 </code></blockquote></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>file</code> - the file used to persist</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>delegate</code> or <code>file</code> is null</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PersistentObject</h4>
<pre>public&nbsp;PersistentObject()</pre>
<div class="block">Default constructor. Caller must still configure the delegate and persistent file prior to start.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getDelegate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDelegate</h4>
<pre class="methodSignature">public&nbsp;<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;getDelegate()</pre>
<div class="block">Get the configured <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the delegate supplying required operations</dd>
</dl>
</li>
</ul>
<a id="setDelegate(org.dellroad.stuff.pobj.PersistentObjectDelegate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDelegate</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setDelegate&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;delegate)</pre>
<div class="block">Configure the <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj"><code>PersistentObjectDelegate</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>delegate</code> is null</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is started</dd>
</dl>
</li>
</ul>
<a id="getFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;getFile()</pre>
<div class="block">Get the persistent file containing the XML form of the persisted object.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>file used to persist the root object</dd>
</dl>
</li>
</ul>
<a id="setFile(java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFile</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setFile&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file)</pre>
<div class="block">Set the persistent file containing the XML form of the persisted object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - the file used to persist the root object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>file</code> is null</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is started</dd>
</dl>
</li>
</ul>
<a id="getWriteDelay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWriteDelay</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getWriteDelay()</pre>
<div class="block">Get the maximum delay after an update operation before a write-back to the persistent file
 must be initiated.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>write delay in milliseconds, or zero for immediate write-back</dd>
</dl>
</li>
</ul>
<a id="setWriteDelay(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setWriteDelay</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setWriteDelay&#8203;(long&nbsp;writeDelay)</pre>
<div class="block">Set the maximum delay after an update operation before a write-back to the persistent file
 must be initiated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>writeDelay</code> - write delay in milliseconds, or zero for immediate write-back</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>writeDelay</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is started</dd>
</dl>
</li>
</ul>
<a id="getCheckInterval()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckInterval</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getCheckInterval()</pre>
<div class="block">Get the delay time between periodic checks for changes in the underlying persistent file.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>check interval in milliseconds, or zero if periodic checks are disabled</dd>
</dl>
</li>
</ul>
<a id="setCheckInterval(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckInterval</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setCheckInterval&#8203;(long&nbsp;checkInterval)</pre>
<div class="block">Set the delay time between periodic checks for changes in the underlying persistent file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>checkInterval</code> - check interval in milliseconds, or zero if periodic checks are disabled</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>writeDelay</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is started</dd>
</dl>
</li>
</ul>
<a id="getVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getVersion()</pre>
<div class="block">Get the version of the current root.

 <p>
 This returns a value which increases monotonically with each update.
 The version number is not persisted with the persistent file; each instance of this class keeps
 its own version count. The version is reset to zero when <a href="#stop()"><code>stop()</code></a> is invoked.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current positive object version, or zero if no value has been loaded yet or this instance is not started</dd>
</dl>
</li>
</ul>
<a id="getNumBackups()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumBackups</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getNumBackups()</pre>
<div class="block">Get the number of backup copies to preserve.

 <p>
 Backup files have suffixes of the form <code>.1</code>,  <code>.2</code>, etc.,
 in reverse chronological order. Each time a new root object is written, the existing files are rotated.

 <p>
 Back-ups are created via hard links and are only supported on UNIX systems.

 <p>
 The default is zero, which disables backups.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of backing file backup copies</dd>
</dl>
</li>
</ul>
<a id="setNumBackups(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNumBackups</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setNumBackups&#8203;(int&nbsp;numBackups)</pre>
<div class="block">Set the number of backup copies to preserve.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>numBackups</code> - number of backing file backup copies</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>numBackups</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if no persistent file has been configured yet</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getNumBackups()"><code>getNumBackups()</code></a></dd>
</dl>
</li>
</ul>
<a id="isAllowEmptyStart()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAllowEmptyStart</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isAllowEmptyStart()</pre>
<div class="block">Determine whether this instance should allow an "empty start".

 <p>
 The default for this property is false.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>if empty starts are allowed</dd>
</dl>
</li>
</ul>
<a id="setAllowEmptyStart(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAllowEmptyStart</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setAllowEmptyStart&#8203;(boolean&nbsp;allowEmptyStart)</pre>
<div class="block">Configure whether an "empty start" is allowed.

 <p>
 The default for this property is false.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allowEmptyStart</code> - true to allow empty starts</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is started</dd>
</dl>
</li>
</ul>
<a id="isAllowEmptyStop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAllowEmptyStop</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isAllowEmptyStop()</pre>
<div class="block">Determine whether this instance should allow an "empty stop".

 <p>
 The default for this property is false.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if empty stops are allowed</dd>
</dl>
</li>
</ul>
<a id="setAllowEmptyStop(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAllowEmptyStop</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setAllowEmptyStop&#8203;(boolean&nbsp;allowEmptyStop)</pre>
<div class="block">Configure whether an "empty stop" is allowed.

 <p>
 The default for this property is false.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allowEmptyStop</code> - true to allow empty stops</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is started</dd>
</dl>
</li>
</ul>
<a id="isStarted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStarted</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isStarted()</pre>
<div class="block">Determine whether this instance is started.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this instance currently started</dd>
</dl>
</li>
</ul>
<a id="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;start()</pre>
<div class="block">Start this instance. Does nothing if already started.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="stop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;stop()</pre>
<div class="block">Stop this instance. Does nothing if already stopped.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if a delayed write back is pending and error occurs while performing the write</dd>
</dl>
</li>
</ul>
<a id="hasRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasRoot</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;hasRoot()</pre>
<div class="block">Determine whether this instance has a non-null root object.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this instance has a non-null root object, false if this instance is not started
  or is in an empty start or empty stop state</dd>
</dl>
</li>
</ul>
<a id="getRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRoot</h4>
<pre class="methodSignature">public&nbsp;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;getRoot()</pre>
<div class="block">Atomically read the root object.

 <p>
 In the situation of an empty start or empty stop, this instance is "unconfigured" and null will be returned.
 This can only happen if <a href="#setAllowEmptyStart(boolean)"><code>setAllowEmptyStart(true)</code></a> or <a href="#setAllowEmptyStop(boolean)"><code>setAllowEmptyStop(true)</code></a> has been invoked.

 <p>
 This returns a deep copy of the current root object; any subsequent modifications are not written back.
 Use <a href="#getSharedRoot()"><code>getSharedRoot()</code></a> instead to avoid the cost of the deep copy at the risk of seeing modifications
 caused by other invokers.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current root instance, or null during an empty start or empty stop</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is not started</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="getSharedRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSharedRoot</h4>
<pre class="methodSignature">public&nbsp;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;getSharedRoot()</pre>
<div class="block">Get a shared copy of the root object.

 <p>
 This returns a copy of the root object, but it returns the same copy each time until the next change.
 This method is more efficient than <a href="#getRoot()"><code>getRoot()</code></a>, but all callers must agree not to modify the returned object
 or any object in its graph of references.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>shared copy of the root instance, or null during an empty start or empty stop</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is not started</dd>
</dl>
</li>
</ul>
<a id="getRootSnapshot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRootSnapshot</h4>
<pre class="methodSignature">public&nbsp;<a href="PersistentObject.Snapshot.html" title="class in org.dellroad.stuff.pobj">PersistentObject.Snapshot</a>&nbsp;getRootSnapshot()</pre>
<div class="block">Read the root object (as with <a href="#getRoot()"><code>getRoot()</code></a>) and its version (as with <a href="#getVersion()"><code>getVersion()</code></a>) in one atomic operation.
 This avoids the race condition inherent in trying to perform these operations separately.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>snapshot of the current root, or null during an empty start or empty stop</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is not started</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getRoot()"><code>getRoot()</code></a></dd>
</dl>
</li>
</ul>
<a id="getSharedRootSnapshot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSharedRootSnapshot</h4>
<pre class="methodSignature">public&nbsp;<a href="PersistentObject.Snapshot.html" title="class in org.dellroad.stuff.pobj">PersistentObject.Snapshot</a>&nbsp;getSharedRootSnapshot()</pre>
<div class="block">Read the shared root object (as with <a href="#getSharedRoot()"><code>getSharedRoot()</code></a>) and its version (as with <a href="#getVersion()"><code>getVersion()</code></a>)
 in one atomic operation.
 This avoids the race condition inherent in trying to perform these operations separately.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>snapshot of the current shared root, or null during an empty start or empty stop</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is not started</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getSharedRoot()"><code>getSharedRoot()</code></a></dd>
</dl>
</li>
</ul>
<a id="setRoot(java.lang.Object,long,boolean)">
<!--   -->
</a><a id="setRoot(T,long,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRoot</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;setRoot&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot,
                    long&nbsp;expectedVersion,
                    boolean&nbsp;alreadyValidated)</pre>
<div class="block">Atomically update the root object.

 <p>
 The given object is deep-copied, the copy replaces the current root, and the new version number is returned.
 If there is no write delay configured, the new version is written to the underlying file immediately and
 a successful return from this method indicates the new root has been persisted. Otherwise, the write will
 occur at a later time in a separate thread.

 <p>
 If <code>expectedVersion</code> is non-zero, then if the current version is not equal to it,
 a <a href="PersistentObjectVersionException.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectVersionException</code></a> exception is thrown. This mechanism
 can be used for optimistic locking.

 <p>
 If empty stops are allowed, then <code>newRoot</code> may be null, in which case it replaces the
 current root and subsequent calls to <a href="#getRoot()"><code>getRoot()</code></a> will return null. When a null
 <code>newRoot</code> is set, the persistent file is <b>not</b> modified.

 <p>
 If the given root object is <a href="PersistentObjectDelegate.html#isSameGraph(T,T)">the same as</a> the current
 root object, then no action is taken and the current (unchanged) version number is returned.

 <p>
 After a successful change, any registered <a href="PersistentObjectListener.html" title="interface in org.dellroad.stuff.pobj">listeners</a> are notified in a
 separate thread from the one that invoked this method.

 <p>
 It is possible that this method may succeed, even though writing out the new file fails. In that case,
 <a href="PersistentObjectDelegate.html#handleWritebackException(org.dellroad.stuff.pobj.PersistentObject,java.lang.Throwable)"><code>PersistentObjectDelegate.handleWritebackException()</code></a>
 will be invoked (in a separate thread).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newRoot</code> - new persistent object</dd>
<dd><code>expectedVersion</code> - expected current version number, or zero to ignore the current version number</dd>
<dd><code>alreadyValidated</code> - true if <code>newRoot</code> has already been validated</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the new current version number (unchanged if <code>newRoot</code> is
  <a href="PersistentObjectDelegate.html#isSameGraph(T,T)">the same as</a> the current root)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>newRoot</code> is null and empty stops are disallowed</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>expectedVersion</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is not started</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
<dd><code><a href="PersistentObjectVersionException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectVersionException</a></code> - if <code>expectedVersion</code> is non-zero and not equal to the current version</dd>
<dd><code><a href="PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectValidationException</a></code> - if the new root has validation errors</dd>
</dl>
</li>
</ul>
<a id="setRoot(java.lang.Object,long)">
<!--   -->
</a><a id="setRoot(T,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRoot</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;setRoot&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot,
                    long&nbsp;expectedVersion)</pre>
<div class="block">Atomically update the root object.

 <p>
 This method is equivalent to:
 <blockquote><code>
  setRoot(newRoot, expectedVersion, false);
 </code></blockquote></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newRoot</code> - new persistent object</dd>
<dd><code>expectedVersion</code> - expected current version number, or zero to ignore the current version number</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the new current version number (unchanged if <code>newRoot</code> is
  <a href="PersistentObjectDelegate.html#isSameGraph(T,T)">the same as</a> the current root)</dd>
</dl>
</li>
</ul>
<a id="setRoot(java.lang.Object)">
<!--   -->
</a><a id="setRoot(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRoot</h4>
<pre class="methodSignature">public final&nbsp;long&nbsp;setRoot&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot)</pre>
<div class="block">Atomically update the root object.

 <p>
 The is a convenience method, equivalent to:
  <blockquote>
  <code><a href="#setRoot(T,long)"><code>setRoot</code></a>(newRoot, 0)</code>
  </blockquote>

 <p>
 This method cannot throw <a href="PersistentObjectVersionException.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObjectVersionException</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newRoot</code> - new persistent root object</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the new current version number (unchanged if <code>newRoot</code> is
  <a href="PersistentObjectDelegate.html#isSameGraph(T,T)">the same as</a> the current root)</dd>
</dl>
</li>
</ul>
<a id="checkFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkFile</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;checkFile()</pre>
<div class="block">Check the persistent file for an "out-of-band" update.

 <p>
 If the persistent file has a newer timestamp than the timestamp of the most recently read
 or written version, then it will be read and applied to this instance.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if this instance is not started</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="addListener(org.dellroad.stuff.pobj.PersistentObjectListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addListener&#8203;(<a href="PersistentObjectListener.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectListener</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;listener)</pre>
<div class="block">Add a listener to be notified each time the object graph changes.

 <p>
 Listeners are notified in a separate thread from the one that caused the root object to change.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - listener to add</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>listener</code> is null</dd>
</dl>
</li>
</ul>
<a id="removeListener(org.dellroad.stuff.pobj.PersistentObjectListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeListener&#8203;(<a href="PersistentObjectListener.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectListener</a>&lt;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&gt;&nbsp;listener)</pre>
<div class="block">Remove a listener added via <a href="#addListener(org.dellroad.stuff.pobj.PersistentObjectListener)"><code>addListener()</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - listener to remove</dd>
</dl>
</li>
</ul>
<a id="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;toString()</pre>
<div class="block">Get a simple string description of this instance. This description appears in all log messages.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></dd>
</dl>
</li>
</ul>
<a id="read()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre class="methodSignature">protected&nbsp;<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;read()</pre>
<div class="block">Read the persistent file. Does not validate it.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>root object decoded from backing file</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if the file does not exist or cannot be read</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="write(java.lang.Object)">
<!--   -->
</a><a id="write(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre class="methodSignature">protected final&nbsp;void&nbsp;write&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;obj)</pre>
<div class="block">Write the persistent file and rotate any backups.

 <p>
 A temporary file is created in the same directory and then renamed to provide for an atomic update
 (on supporting operating systems).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obj</code> - root object to write</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>obj</code> is null</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="createResult(java.io.OutputStream,java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createResult</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Result.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink">Result</a>&nbsp;createResult&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io" class="externalLink">OutputStream</a>&nbsp;output,
                              <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;systemId)</pre>
<div class="block">Create a <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Result.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink"><code>Result</code></a> targeting the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>OutputStream</code></a>.

 <p>
 The implementation in <a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> creates and returns a <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/stream/StreamResult.html?is-external=true" title="class or interface in javax.xml.transform.stream" class="externalLink"><code>StreamResult</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>output</code> - XML output stream</dd>
<dd><code>systemId</code> - system ID</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>XML result output</dd>
</dl>
</li>
</ul>
<a id="notifyListeners(long,java.lang.Object,java.lang.Object)">
<!--   -->
</a><a id="notifyListeners(long,T,T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyListeners</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;notifyListeners&#8203;(long&nbsp;newVersion,
                               <a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;oldRoot,
                               <a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;newRoot)</pre>
<div class="block">Notify listeners of a change in value.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newVersion</code> - the version number associated with the new root</dd>
<dd><code>oldRoot</code> - previous root object</dd>
<dd><code>newRoot</code> - new root object</dd>
</dl>
</li>
</ul>
<a id="read(org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Source,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre class="methodSignature">public static&nbsp;&lt;T&gt;&nbsp;T&nbsp;read&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
                         <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Source.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink">Source</a>&nbsp;source,
                         boolean&nbsp;validate)</pre>
<div class="block">Read in a persistent object using the given delegate.

 <p>
 This is a convenience method that can be used for a one-time deserialization from an XML <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Source.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink"><code>Source</code></a> without having
 to go through the whole <a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> lifecycle.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - root object type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>source</code> - source for serialized root object</dd>
<dd><code>validate</code> - whether to also validate the root object</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>deserialized root object, never null</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if any parameter is null</dd>
<dd><code><a href="PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectValidationException</a></code> - if <code>validate</code> is true and the deserialized root has validation errors</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="validate(java.lang.Object)">
<!--   -->
</a><a id="validate(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validate</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;validate&#8203;(<a href="PersistentObject.html" title="type parameter in PersistentObject">T</a>&nbsp;root)</pre>
<div class="block">Validate a root object.

 <p>
 Deletgates to <a href="PersistentObjectDelegate.html#validate(T)"><code>PersistentObjectDelegate.validate(T)</code></a> to perform the actual validation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>root</code> - root object to validate</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if <code>root</code> is null</dd>
<dd><code><a href="PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectValidationException</a></code> - if the root has validation errors</dd>
</dl>
</li>
</ul>
<a id="read(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre class="methodSignature">public static&nbsp;&lt;T&gt;&nbsp;T&nbsp;read&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file,
                         boolean&nbsp;validate)</pre>
<div class="block">Read in a persistent object from the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>File</code></a> using the given delegate.

 <p>
 This is a wrapper around <a href="#read(org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Source,boolean)"><code>read(PersistentObjectDelegate, Source, boolean)</code></a> that handles
 opening and closing the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>File</code></a>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - root object type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>file</code> - file to read from</dd>
<dd><code>validate</code> - whether to also validate the root object</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>deserialized root object, never null</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if any parameter is null</dd>
<dd><code><a href="PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectValidationException</a></code> - if <code>validate</code> is true and the deserialized root has validation errors</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if <code>file</code> cannot be read</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="read(org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.InputStream,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre class="methodSignature">public static&nbsp;&lt;T&gt;&nbsp;T&nbsp;read&#8203;(<a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io" class="externalLink">InputStream</a>&nbsp;input,
                         boolean&nbsp;validate)</pre>
<div class="block">Read in a persistent object from the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>InputStream</code></a> using the given delegate.

 <p>
 This is a wrapper around <a href="#read(org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Source,boolean)"><code>read(PersistentObjectDelegate, Source, boolean)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - root object type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>input</code> - input to read from</dd>
<dd><code>validate</code> - whether to also validate the root object</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>deserialized root object, never null</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if any parameter is null</dd>
<dd><code><a href="PersistentObjectValidationException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectValidationException</a></code> - if <code>validate</code> is true and the deserialized root has validation errors</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an I/O error occurs</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="write(java.lang.Object,org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Result)">
<!--   -->
</a><a id="write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Result)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre class="methodSignature">public static&nbsp;&lt;T&gt;&nbsp;void&nbsp;write&#8203;(T&nbsp;root,
                             <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
                             <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Result.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink">Result</a>&nbsp;result)</pre>
<div class="block">Write a persistent object using the given delegate.

 <p>
 This is a convenience method that can be used for one-time serialization to an XML <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/transform/Result.html?is-external=true" title="class or interface in javax.xml.transform" class="externalLink"><code>Result</code></a> without having
 to go through the whole <a href="PersistentObject.html" title="class in org.dellroad.stuff.pobj"><code>PersistentObject</code></a> lifecycle.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - root object type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>root</code> - root object to serialize</dd>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>result</code> - destination</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if any parameter is null</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="write(java.lang.Object,org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File)">
<!--   -->
</a><a id="write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre class="methodSignature">public static&nbsp;&lt;T&gt;&nbsp;void&nbsp;write&#8203;(T&nbsp;root,
                             <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
                             <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;file)</pre>
<div class="block">Write a persistent object using the given delegate.

 <p>
 This is a wrapper around <a href="#write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Result)"><code>write(Object, PersistentObjectDelegate, Result)</code></a> that handles
 opening and closing the given <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink"><code>File</code></a>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - root object type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>root</code> - root object to serialize</dd>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>file</code> - destination file</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if any parameter is null</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="write(java.lang.Object,org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.OutputStream)">
<!--   -->
</a><a id="write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,java.io.OutputStream)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>write</h4>
<pre class="methodSignature">public static&nbsp;&lt;T&gt;&nbsp;void&nbsp;write&#8203;(T&nbsp;root,
                             <a href="PersistentObjectDelegate.html" title="interface in org.dellroad.stuff.pobj">PersistentObjectDelegate</a>&lt;T&gt;&nbsp;delegate,
                             <a href="https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io" class="externalLink">OutputStream</a>&nbsp;output)</pre>
<div class="block">Write a persistent object using the given delegate.

 <p>
 This is a wrapper around <a href="#write(T,org.dellroad.stuff.pobj.PersistentObjectDelegate,javax.xml.transform.Result)"><code>write(Object, PersistentObjectDelegate, Result)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - root object type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>root</code> - root object to serialize</dd>
<dd><code>delegate</code> - delegate supplying required operations</dd>
<dd><code>output</code> - XML destination</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if any parameter is null</dd>
<dd><code><a href="PersistentObjectException.html" title="class in org.dellroad.stuff.pobj">PersistentObjectException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PersistentObject.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2023. All rights reserved.</small></p>
</footer>
</body>
</html>
