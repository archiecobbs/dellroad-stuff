<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>AbstractSchemaUpdater (DellRoad Stuff 2.5.4 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AbstractSchemaUpdater (DellRoad Stuff 2.5.4 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":6,"i3":6,"i4":10,"i5":10,"i6":6,"i7":10,"i8":10,"i9":10,"i10":6,"i11":10,"i12":9,"i13":6,"i14":6,"i15":6,"i16":10,"i17":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractSchemaUpdater.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.dellroad.stuff.schema</a></div>
<h2 title="Class AbstractSchemaUpdater" class="title">Class AbstractSchemaUpdater&lt;D,&#8203;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.dellroad.stuff.schema.AbstractSchemaUpdater&lt;D,&#8203;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>D</code> - database type</dd>
<dd><code>T</code> - database transaction type</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../pobj/PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj">PersistentObjectSchemaUpdater</a></code>, <code><a href="SQLSchemaUpdater.html" title="class in org.dellroad.stuff.schema">SQLSchemaUpdater</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">AbstractSchemaUpdater&lt;D,&#8203;T&gt;</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Handles the initialization and schema maintenance of a database.

 <p>
 In this class, a <b>database</b> is some stateful object whose structure and/or content may need to change over time.
 <b>Updates</b> are uniquely named objects capable of making such changes. Databases are also capable of storing the
 names of the already-applied updates.

 <p>
 Given a database and a set of current updates, this class will ensure that a database is initialized if necessary
 and up-to-date with respect to the updates.

 <p>
 The primary method is <a href="#initializeAndUpdateDatabase(D)"><code>initializeAndUpdateDatabase()</code></a>, which will:
 <ul>
 <li>Initialize an <a href="#databaseNeedsInitialization(T)">empty</a> database (if necessary);</li>
 <li>Apply any outstanding <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema"><code>SchemaUpdate</code></a>s as needed, ordered properly according to
      their <a href="SchemaUpdate.html#getRequiredPredecessors()">predecessor constraints</a>; and</li>
 <li>Keep track of which <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema"><code>SchemaUpdate</code></a>s have already been applied across restarts.</li>
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://maven.apache.org/ref/3.3.9/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j" class="externalLink">Logger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#log">log</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">AbstractSchemaUpdater</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#apply(T,org.dellroad.stuff.schema.DatabaseAction)">apply</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
     <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)</code></th>
<td class="colLast">
<div class="block">Execute a database action within an existing transaction.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyInTransaction(D,org.dellroad.stuff.schema.DatabaseAction)">applyInTransaction</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database,
                  <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)</code></th>
<td class="colLast">
<div class="block">Execute a database action.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#commitTransaction(T)">commitTransaction</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></th>
<td class="colLast">
<div class="block">Commit a previously opened transaction.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected abstract boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#databaseNeedsInitialization(T)">databaseNeedsInitialization</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></th>
<td class="colLast">
<div class="block">Determine if the database needs initialization.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateMultiUpdateName(org.dellroad.stuff.schema.SchemaUpdate,int)">generateMultiUpdateName</a></span>&#8203;(<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;update,
                       int&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Generate the update name for one action within a multi-action update.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAllUpdateNames()">getAllUpdateNames</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the names of all updates including multi-action updates.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected abstract <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util" class="externalLink">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAppliedUpdateNames(T)">getAppliedUpdateNames</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></th>
<td class="colLast">
<div class="block">Determine which updates have already been applied to the database.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util" class="externalLink">Comparator</a>&lt;<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOrderingTieBreaker()">getOrderingTieBreaker</a></span>()</code></th>
<td class="colLast">
<div class="block">Determine the preferred ordering of two updates that do not have any predecessor constraints
 (including implied indirect constraints) between them.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUpdates()">getUpdates</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the configured updates.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initializeAndUpdateDatabase(D)">initializeAndUpdateDatabase</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)</code></th>
<td class="colLast">
<div class="block">Perform database schema initialization and updates.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initializeDatabase(T)">initializeDatabase</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></th>
<td class="colLast">
<div class="block">Initialize an uninitialized database.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isIgnoreUnrecognizedUpdates()">isIgnoreUnrecognizedUpdates</a></span>()</code></th>
<td class="colLast">
<div class="block">Determine whether unrecognized updates are ignored or cause an exception.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isValidUpdateName(java.lang.String)">isValidUpdateName</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;updateName)</code></th>
<td class="colLast">
<div class="block">Determine if the given schema update name is valid.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#openTransaction(D)">openTransaction</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)</code></th>
<td class="colLast">
<div class="block">Begin a transaction on the given database.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recordUpdateApplied(T,java.lang.String)">recordUpdateApplied</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name)</code></th>
<td class="colLast">
<div class="block">Record an update as having been applied to the database.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#rollbackTransaction(T)">rollbackTransaction</a></span>&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></th>
<td class="colLast">
<div class="block">Roll back a previously opened transaction.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setIgnoreUnrecognizedUpdates(boolean)">setIgnoreUnrecognizedUpdates</a></span>&#8203;(boolean&nbsp;ignoreUnrecognizedUpdates)</code></th>
<td class="colLast">
<div class="block">Configure behavior when an unknown update is registered as having already been applied in the database.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setUpdates(java.util.Collection)">setUpdates</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;&nbsp;updates)</code></th>
<td class="colLast">
<div class="block">Configure the updates.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>protected final&nbsp;<a href="https://maven.apache.org/ref/3.3.9/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j" class="externalLink">Logger</a> log</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractSchemaUpdater</h4>
<pre>public&nbsp;AbstractSchemaUpdater()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getUpdates()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUpdates</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;&nbsp;getUpdates()</pre>
<div class="block">Get the configured updates. This property is required.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>configured updates</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setUpdates(java.util.Collection)"><code>setUpdates()</code></a></dd>
</dl>
</li>
</ul>
<a id="setUpdates(java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUpdates</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setUpdates&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;&nbsp;updates)</pre>
<div class="block">Configure the updates.
 This should be the set of all updates that may need to be applied to the database.

 <p>
 For any given application, ideally this set should be "write only" in the sense that once an update is added to the set
 and applied to one or more actual databases, the update and its name should thereafter never change. Otherwise,
 it would be possible for different databases to have inconsistent schemas even though the same updates were recorded.

 <p>
 Furthermore, if not configured to <a href="#setIgnoreUnrecognizedUpdates(boolean)">ignore unrecognized updates already applied</a>
 (the default behavior), then updates must never be removed from this set as the application evolves;
 see <a href="#setIgnoreUnrecognizedUpdates(boolean)"><code>setIgnoreUnrecognizedUpdates(boolean)</code></a> for more information on the rationale.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>updates</code> - all updates; each update must have a unique <a href="SchemaUpdate.html#getName()"><code>name</code></a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getUpdates()"><code>getUpdates()</code></a>, 
<a href="#setIgnoreUnrecognizedUpdates(boolean)"><code>setIgnoreUnrecognizedUpdates(boolean)</code></a></dd>
</dl>
</li>
</ul>
<a id="isIgnoreUnrecognizedUpdates()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isIgnoreUnrecognizedUpdates</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isIgnoreUnrecognizedUpdates()</pre>
<div class="block">Determine whether unrecognized updates are ignored or cause an exception.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if unrecognized updates should be ignored, false if they should cause an exception to be thrown</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setIgnoreUnrecognizedUpdates(boolean)"><code>setIgnoreUnrecognizedUpdates()</code></a></dd>
</dl>
</li>
</ul>
<a id="setIgnoreUnrecognizedUpdates(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIgnoreUnrecognizedUpdates</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setIgnoreUnrecognizedUpdates&#8203;(boolean&nbsp;ignoreUnrecognizedUpdates)</pre>
<div class="block">Configure behavior when an unknown update is registered as having already been applied in the database.

 <p>
 The default behavior is <code>false</code>, which results in an exception being thrown. This protects against
 accidental downgrades (i.e., running older code against a database with a newer schema), which are not supported.
 However, this also requires that all updates that might ever possibly have been applied to the database be
 present in the set of configured updates.

 <p>
 Setting this to <code>true</code> will result in unrecognized updates simply being ignored.
 This setting loses the downgrade protection but allows obsolete schema updates to be dropped over time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ignoreUnrecognizedUpdates</code> - whether to ignore unrecognized updates</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#isIgnoreUnrecognizedUpdates()"><code>isIgnoreUnrecognizedUpdates()</code></a></dd>
</dl>
</li>
</ul>
<a id="initializeAndUpdateDatabase(java.lang.Object)">
<!--   -->
</a><a id="initializeAndUpdateDatabase(D)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeAndUpdateDatabase</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;initializeAndUpdateDatabase&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)
                                 throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Perform database schema initialization and updates.

 <p>
 This method applies the following logic: if the <a href="#databaseNeedsInitialization(T)">database needs initialization</a>,
 then <a href="#initializeDatabase(T)">initialize the database</a> and <a href="#recordUpdateApplied(T,java.lang.String)">record</a> each update
 as having been applied; otherwise, <a href="#apply(T,org.dellroad.stuff.schema.DatabaseAction)">apply</a> any <a href="#getAppliedUpdateNames(T)">unapplied updates</a>
 as needed.

 <p>
 Note this implies the database initialization must initialize the database to its current, up-to-date state
 (with respect to the set of all available updates), not its original, pre-update state.

 <p>
 The database initialization step, and each of the update steps, is <a href="#applyInTransaction(D,org.dellroad.stuff.schema.DatabaseAction)">performed within
 its own transaction</a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>database</code> - the database to initialize (if necessary) and update</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an update fails</dd>
<dd><code><a href="UnrecognizedUpdateException.html" title="class in org.dellroad.stuff.schema">UnrecognizedUpdateException</a></code> - if this instance is not configured to <a href="#setIgnoreUnrecognizedUpdates(boolean)">ignore
 unrecognized updates</a> and an unrecognized update has already been applied</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if two configured updates have the same name</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if any configured update has a required predecessor which is not also a configured update
  (i.e., if the updates are not transitively closed under predecessors)</dd>
</dl>
</li>
</ul>
<a id="isValidUpdateName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidUpdateName</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isValidUpdateName&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;updateName)</pre>
<div class="block">Determine if the given schema update name is valid. Valid names are non-empty and
 have no leading or trailing whitespace.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>updateName</code> - schema update name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if <code>updateName</code> is valid</dd>
</dl>
</li>
</ul>
<a id="databaseNeedsInitialization(java.lang.Object)">
<!--   -->
</a><a id="databaseNeedsInitialization(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>databaseNeedsInitialization</h4>
<pre class="methodSignature">protected abstract&nbsp;boolean&nbsp;databaseNeedsInitialization&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)
                                                throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Determine if the database needs initialization.

 <p>
 If so, <a href="#initializeDatabase(T)"><code>initializeDatabase(T)</code></a> will eventually be invoked.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transaction</code> - open transaction</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the database needs initialization</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="initializeDatabase(java.lang.Object)">
<!--   -->
</a><a id="initializeDatabase(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeDatabase</h4>
<pre class="methodSignature">protected abstract&nbsp;void&nbsp;initializeDatabase&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)
                                    throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Initialize an uninitialized database. This should create and initialize the database schema and content,
 including whatever portion of that is used to track schema updates.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transaction</code> - open transaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="openTransaction(java.lang.Object)">
<!--   -->
</a><a id="openTransaction(D)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openTransaction</h4>
<pre class="methodSignature">protected abstract&nbsp;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;openTransaction&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)
                              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Begin a transaction on the given database.
 The transaction will always eventually either be
 <a href="#commitTransaction(T)">committed</a> or <a href="#rollbackTransaction(T)">rolled back</a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>database</code> - database</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>transaction handle</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="commitTransaction(java.lang.Object)">
<!--   -->
</a><a id="commitTransaction(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitTransaction</h4>
<pre class="methodSignature">protected abstract&nbsp;void&nbsp;commitTransaction&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)
                                   throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Commit a previously opened transaction.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transaction</code> - open transaction previously returned from <a href="#openTransaction(D)"><code>openTransaction()</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="rollbackTransaction(java.lang.Object)">
<!--   -->
</a><a id="rollbackTransaction(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollbackTransaction</h4>
<pre class="methodSignature">protected abstract&nbsp;void&nbsp;rollbackTransaction&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)
                                     throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Roll back a previously opened transaction.
 This method will also be invoked if <a href="#commitTransaction(T)"><code>commitTransaction()</code></a> throws an exception.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transaction</code> - open transaction previously returned from <a href="#openTransaction(D)"><code>openTransaction()</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="getAppliedUpdateNames(java.lang.Object)">
<!--   -->
</a><a id="getAppliedUpdateNames(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAppliedUpdateNames</h4>
<pre class="methodSignature">protected abstract&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util" class="externalLink">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&gt;&nbsp;getAppliedUpdateNames&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)
                                              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Determine which updates have already been applied to the database.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transaction</code> - open transaction</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>set of already-applied updates</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="recordUpdateApplied(java.lang.Object,java.lang.String)">
<!--   -->
</a><a id="recordUpdateApplied(T,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordUpdateApplied</h4>
<pre class="methodSignature">protected abstract&nbsp;void&nbsp;recordUpdateApplied&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
                                            <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;name)
                                     throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Record an update as having been applied to the database.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transaction</code> - open transaction</dd>
<dd><code>name</code> - update name</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalStateException</a></code> - if the update has already been recorded in the database</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="getOrderingTieBreaker()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrderingTieBreaker</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util" class="externalLink">Comparator</a>&lt;<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;&nbsp;getOrderingTieBreaker()</pre>
<div class="block">Determine the preferred ordering of two updates that do not have any predecessor constraints
 (including implied indirect constraints) between them.

 <p>
 The <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util" class="externalLink"><code>Comparator</code></a> returned by the implementation in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> simply sorts updates by name.
 Subclasses may override if necessary.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util" class="externalLink"><code>Comparator</code></a> that sorts incomparable updates in the order they should be applied</dd>
</dl>
</li>
</ul>
<a id="generateMultiUpdateName(org.dellroad.stuff.schema.SchemaUpdate,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateMultiUpdateName</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;generateMultiUpdateName&#8203;(<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;update,
                                         int&nbsp;index)</pre>
<div class="block">Generate the update name for one action within a multi-action update.

 <p>
 The implementation in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> just adds a suffix using <code>index + 1</code>, padded to
 5 digits, producing names like <code>name-00001</code>, <code>name-00002</code>, etc.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>update</code> - the schema update</dd>
<dd><code>index</code> - the index of the action (zero based)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>update name</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="SchemaUpdate.html#isSingleAction()"><code>SchemaUpdate.isSingleAction()</code></a></dd>
</dl>
</li>
</ul>
<a id="getAllUpdateNames()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllUpdateNames</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&gt;&nbsp;getAllUpdateNames()
                                  throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Get the names of all updates including multi-action updates.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of update names</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a id="apply(java.lang.Object,org.dellroad.stuff.schema.DatabaseAction)">
<!--   -->
</a><a id="apply(T,org.dellroad.stuff.schema.DatabaseAction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apply</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;apply&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
                     <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)
              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Execute a database action within an existing transaction.

 <p>
 All database operations in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> are performed via this method;
 subclasses are encouraged to follow this pattern.

 <p>
 The implementation in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> simply invokes <a href="DatabaseAction.html#apply(T)"><code>action.apply()</code></a>;
 subclasses may override if desired.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transaction</code> - transaction within which to apply <code>action</code></dd>
<dd><code>action</code> - operation to perform</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
<a id="applyInTransaction(java.lang.Object,org.dellroad.stuff.schema.DatabaseAction)">
<!--   -->
</a><a id="applyInTransaction(D,org.dellroad.stuff.schema.DatabaseAction)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>applyInTransaction</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;applyInTransaction&#8203;(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database,
                                  <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)
                           throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></pre>
<div class="block">Execute a database action. A new transaction will be created, used, and closed.
 Delegates to <a href="#apply(T,org.dellroad.stuff.schema.DatabaseAction)"><code>apply()</code></a> for the actual execution of the action.

 <p>
 If the action or <a href="#commitTransaction(T)"><code>commitTransaction()</code></a> fails, the transaction
 is <a href="#rollbackTransaction(T)">rolled back</a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>database</code> - database to apply <code>action</code> to</dd>
<dd><code>action</code> - operation to perform</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractSchemaUpdater.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2022. All rights reserved.</small></p>
</footer>
</body>
</html>
