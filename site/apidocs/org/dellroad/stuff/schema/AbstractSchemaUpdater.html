<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>AbstractSchemaUpdater (DellRoad Stuff 3.0.4 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.dellroad.stuff.schema, class: AbstractSchemaUpdater">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/AbstractSchemaUpdater.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.dellroad.stuff.schema</a></div>
<h1 title="Class AbstractSchemaUpdater" class="title">Class AbstractSchemaUpdater&lt;D,<wbr>T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.dellroad.stuff.schema.AbstractSchemaUpdater&lt;D,<wbr>T&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>D</code> - database type</dd>
<dd><code>T</code> - database transaction type</dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../pobj/PersistentObjectSchemaUpdater.html" title="class in org.dellroad.stuff.pobj">PersistentObjectSchemaUpdater</a></code>, <code><a href="SQLSchemaUpdater.html" title="class in org.dellroad.stuff.schema">SQLSchemaUpdater</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">AbstractSchemaUpdater&lt;D,<wbr>T&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Handles the initialization and schema maintenance of a database.

 <p>
 In this class, a <b>database</b> is some stateful object whose structure and/or content may need to change over time.
 <b>Updates</b> are uniquely named objects capable of making such changes. Databases are also capable of storing the
 names of the already-applied updates.

 <p>
 Given a database and a set of current updates, this class will ensure that a database is initialized if necessary
 and up-to-date with respect to the updates.

 <p>
 The primary method is <a href="#initializeAndUpdateDatabase(D)"><code>initializeAndUpdateDatabase()</code></a>, which will:
 <ul>
 <li>Initialize an <a href="#databaseNeedsInitialization(T)">empty</a> database (if necessary);</li>
 <li>Apply any outstanding <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema"><code>SchemaUpdate</code></a>s as needed, ordered properly according to
      their <a href="SchemaUpdate.html#getRequiredPredecessors()">predecessor constraints</a>; and</li>
 <li>Keep track of which <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema"><code>SchemaUpdate</code></a>s have already been applied across restarts.</li>
 </ul></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected final <a href="https://www.slf4j.org/apidocs/org/slf4j/Logger.html" title="class or interface in org.slf4j" class="external-link">Logger</a></code></div>
<div class="col-second even-row-color"><code><a href="#log" class="member-name-link">log</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">AbstractSchemaUpdater</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#apply(T,org.dellroad.stuff.schema.DatabaseAction)" class="member-name-link">apply</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
 <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Execute a database action within an existing transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#applyInTransaction(D,org.dellroad.stuff.schema.DatabaseAction)" class="member-name-link">applyInTransaction</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database,
 <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Execute a database action.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#commitTransaction(T)" class="member-name-link">commitTransaction</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Commit a previously opened transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#databaseNeedsInitialization(T)" class="member-name-link">databaseNeedsInitialization</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Determine if the database needs initialization.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateMultiUpdateName(org.dellroad.stuff.schema.SchemaUpdate,int)" class="member-name-link">generateMultiUpdateName</a><wbr>(<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;update,
 int&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generate the update name for one action within a multi-action update.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAllUpdateNames()" class="member-name-link">getAllUpdateNames</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the names of all updates including multi-action updates.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getAppliedUpdateNames(T)" class="member-name-link">getAppliedUpdateNames</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Determine which updates have already been applied to the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrderingTieBreaker()" class="member-name-link">getOrderingTieBreaker</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine the preferred ordering of two updates that do not have any predecessor constraints
 (including implied indirect constraints) between them.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUpdates()" class="member-name-link">getUpdates</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the configured updates.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeAndUpdateDatabase(D)" class="member-name-link">initializeAndUpdateDatabase</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform database schema initialization and updates.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#initializeDatabase(T)" class="member-name-link">initializeDatabase</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Initialize an uninitialized database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isIgnoreUnrecognizedUpdates()" class="member-name-link">isIgnoreUnrecognizedUpdates</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine whether unrecognized updates are ignored or cause an exception.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isValidUpdateName(java.lang.String)" class="member-name-link">isValidUpdateName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;updateName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Determine if the given schema update name is valid.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#openTransaction(D)" class="member-name-link">openTransaction</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Begin a transaction on the given database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#recordUpdateApplied(T,java.lang.String)" class="member-name-link">recordUpdateApplied</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Record an update as having been applied to the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#rollbackTransaction(T)" class="member-name-link">rollbackTransaction</a><wbr>(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Roll back a previously opened transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setIgnoreUnrecognizedUpdates(boolean)" class="member-name-link">setIgnoreUnrecognizedUpdates</a><wbr>(boolean&nbsp;ignoreUnrecognizedUpdates)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure behavior when an unknown update is registered as having already been applied in the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setUpdates(java.util.Collection)" class="member-name-link">setUpdates</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;&nbsp;updates)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure the updates.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="log">
<h3>log</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://www.slf4j.org/apidocs/org/slf4j/Logger.html" title="class or interface in org.slf4j" class="external-link">Logger</a></span>&nbsp;<span class="element-name">log</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>AbstractSchemaUpdater</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">AbstractSchemaUpdater</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getUpdates()">
<h3>getUpdates</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;</span>&nbsp;<span class="element-name">getUpdates</span>()</div>
<div class="block">Get the configured updates. This property is required.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>configured updates</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#setUpdates(java.util.Collection)"><code>setUpdates()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setUpdates(java.util.Collection)">
<h3>setUpdates</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setUpdates</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;&nbsp;updates)</span></div>
<div class="block">Configure the updates.
 This should be the set of all updates that may need to be applied to the database.

 <p>
 For any given application, ideally this set should be "write only" in the sense that once an update is added to the set
 and applied to one or more actual databases, the update and its name should thereafter never change. Otherwise,
 it would be possible for different databases to have inconsistent schemas even though the same updates were recorded.

 <p>
 Furthermore, if not configured to <a href="#setIgnoreUnrecognizedUpdates(boolean)">ignore unrecognized updates already applied</a>
 (the default behavior), then updates must never be removed from this set as the application evolves;
 see <a href="#setIgnoreUnrecognizedUpdates(boolean)"><code>setIgnoreUnrecognizedUpdates(boolean)</code></a> for more information on the rationale.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>updates</code> - all updates; each update must have a unique <a href="SchemaUpdate.html#getName()"><code>name</code></a>.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getUpdates()"><code>getUpdates()</code></a></li>
<li><a href="#setIgnoreUnrecognizedUpdates(boolean)"><code>setIgnoreUnrecognizedUpdates(boolean)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isIgnoreUnrecognizedUpdates()">
<h3>isIgnoreUnrecognizedUpdates</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isIgnoreUnrecognizedUpdates</span>()</div>
<div class="block">Determine whether unrecognized updates are ignored or cause an exception.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if unrecognized updates should be ignored, false if they should cause an exception to be thrown</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#setIgnoreUnrecognizedUpdates(boolean)"><code>setIgnoreUnrecognizedUpdates()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setIgnoreUnrecognizedUpdates(boolean)">
<h3>setIgnoreUnrecognizedUpdates</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setIgnoreUnrecognizedUpdates</span><wbr><span class="parameters">(boolean&nbsp;ignoreUnrecognizedUpdates)</span></div>
<div class="block">Configure behavior when an unknown update is registered as having already been applied in the database.

 <p>
 The default behavior is <code>false</code>, which results in an exception being thrown. This protects against
 accidental downgrades (i.e., running older code against a database with a newer schema), which are not supported.
 However, this also requires that all updates that might ever possibly have been applied to the database be
 present in the set of configured updates.

 <p>
 Setting this to <code>true</code> will result in unrecognized updates simply being ignored.
 This setting loses the downgrade protection but allows obsolete schema updates to be dropped over time.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ignoreUnrecognizedUpdates</code> - whether to ignore unrecognized updates</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#isIgnoreUnrecognizedUpdates()"><code>isIgnoreUnrecognizedUpdates()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeAndUpdateDatabase(D)">
<h3 id="initializeAndUpdateDatabase(java.lang.Object)">initializeAndUpdateDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeAndUpdateDatabase</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)</span>
                                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Perform database schema initialization and updates.

 <p>
 This method applies the following logic: if the <a href="#databaseNeedsInitialization(T)">database needs initialization</a>,
 then <a href="#initializeDatabase(T)">initialize the database</a> and <a href="#recordUpdateApplied(T,java.lang.String)">record</a> each update
 as having been applied; otherwise, <a href="#apply(T,org.dellroad.stuff.schema.DatabaseAction)">apply</a> any <a href="#getAppliedUpdateNames(T)">unapplied updates</a>
 as needed.

 <p>
 Note this implies the database initialization must initialize the database to its current, up-to-date state
 (with respect to the set of all available updates), not its original, pre-update state.

 <p>
 The database initialization step, and each of the update steps, is <a href="#applyInTransaction(D,org.dellroad.stuff.schema.DatabaseAction)">performed within
 its own transaction</a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>database</code> - the database to initialize (if necessary) and update</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an update fails</dd>
<dd><code><a href="UnrecognizedUpdateException.html" title="class in org.dellroad.stuff.schema">UnrecognizedUpdateException</a></code> - if this instance is not configured to <a href="#setIgnoreUnrecognizedUpdates(boolean)">ignore
 unrecognized updates</a> and an unrecognized update has already been applied</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if two configured updates have the same name</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if any configured update has a required predecessor which is not also a configured update
  (i.e., if the updates are not transitively closed under predecessors)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isValidUpdateName(java.lang.String)">
<h3>isValidUpdateName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isValidUpdateName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;updateName)</span></div>
<div class="block">Determine if the given schema update name is valid. Valid names are non-empty and
 have no leading or trailing whitespace.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>updateName</code> - schema update name</dd>
<dt>Returns:</dt>
<dd>true if <code>updateName</code> is valid</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="databaseNeedsInitialization(T)">
<h3 id="databaseNeedsInitialization(java.lang.Object)">databaseNeedsInitialization</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">databaseNeedsInitialization</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</span>
                                                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Determine if the database needs initialization.

 <p>
 If so, <a href="#initializeDatabase(T)"><code>initializeDatabase(T)</code></a> will eventually be invoked.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dt>Returns:</dt>
<dd>true if the database needs initialization</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeDatabase(T)">
<h3 id="initializeDatabase(java.lang.Object)">initializeDatabase</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeDatabase</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</span>
                                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Initialize an uninitialized database. This should create and initialize the database schema and content,
 including whatever portion of that is used to track schema updates.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="openTransaction(D)">
<h3 id="openTransaction(java.lang.Object)">openTransaction</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a></span>&nbsp;<span class="element-name">openTransaction</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database)</span>
                              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Begin a transaction on the given database.
 The transaction will always eventually either be
 <a href="#commitTransaction(T)">committed</a> or <a href="#rollbackTransaction(T)">rolled back</a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>database</code> - database</dd>
<dt>Returns:</dt>
<dd>transaction handle</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commitTransaction(T)">
<h3 id="commitTransaction(java.lang.Object)">commitTransaction</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">commitTransaction</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</span>
                                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Commit a previously opened transaction.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction previously returned from <a href="#openTransaction(D)"><code>openTransaction()</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rollbackTransaction(T)">
<h3 id="rollbackTransaction(java.lang.Object)">rollbackTransaction</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">rollbackTransaction</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</span>
                                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Roll back a previously opened transaction.
 This method will also be invoked if <a href="#commitTransaction(T)"><code>commitTransaction()</code></a> throws an exception.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction previously returned from <a href="#openTransaction(D)"><code>openTransaction()</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAppliedUpdateNames(T)">
<h3 id="getAppliedUpdateNames(java.lang.Object)">getAppliedUpdateNames</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getAppliedUpdateNames</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction)</span>
                                              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Determine which updates have already been applied to the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dt>Returns:</dt>
<dd>set of already-applied updates</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recordUpdateApplied(T,java.lang.String)">
<h3 id="recordUpdateApplied(java.lang.Object,java.lang.String)">recordUpdateApplied</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordUpdateApplied</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</span>
                                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Record an update as having been applied to the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - open transaction</dd>
<dd><code>name</code> - update name</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the update has already been recorded in the database</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOrderingTieBreaker()">
<h3>getOrderingTieBreaker</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&gt;</span>&nbsp;<span class="element-name">getOrderingTieBreaker</span>()</div>
<div class="block">Determine the preferred ordering of two updates that do not have any predecessor constraints
 (including implied indirect constraints) between them.

 <p>
 The <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link"><code>Comparator</code></a> returned by the implementation in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> simply sorts updates by name.
 Subclasses may override if necessary.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link"><code>Comparator</code></a> that sorts incomparable updates in the order they should be applied</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateMultiUpdateName(org.dellroad.stuff.schema.SchemaUpdate,int)">
<h3>generateMultiUpdateName</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">generateMultiUpdateName</span><wbr><span class="parameters">(<a href="SchemaUpdate.html" title="interface in org.dellroad.stuff.schema">SchemaUpdate</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;update,
 int&nbsp;index)</span></div>
<div class="block">Generate the update name for one action within a multi-action update.

 <p>
 The implementation in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> just adds a suffix using <code>index + 1</code>, padded to
 5 digits, producing names like <code>name-00001</code>, <code>name-00002</code>, etc.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>update</code> - the schema update</dd>
<dd><code>index</code> - the index of the action (zero based)</dd>
<dt>Returns:</dt>
<dd>update name</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="SchemaUpdate.html#isSingleAction()"><code>SchemaUpdate.isSingleAction()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllUpdateNames()">
<h3>getAllUpdateNames</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getAllUpdateNames</span>()
                                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Get the names of all updates including multi-action updates.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>list of update names</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="apply(T,org.dellroad.stuff.schema.DatabaseAction)">
<h3 id="apply(java.lang.Object,org.dellroad.stuff.schema.DatabaseAction)">apply</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">apply</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&nbsp;transaction,
 <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Execute a database action within an existing transaction.

 <p>
 All database operations in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> are performed via this method;
 subclasses are encouraged to follow this pattern.

 <p>
 The implementation in <a href="AbstractSchemaUpdater.html" title="class in org.dellroad.stuff.schema"><code>AbstractSchemaUpdater</code></a> simply invokes <a href="DatabaseAction.html#apply(T)"><code>action.apply()</code></a>;
 subclasses may override if desired.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - transaction within which to apply <code>action</code></dd>
<dd><code>action</code> - operation to perform</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="applyInTransaction(D,org.dellroad.stuff.schema.DatabaseAction)">
<h3 id="applyInTransaction(java.lang.Object,org.dellroad.stuff.schema.DatabaseAction)">applyInTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">applyInTransaction</span><wbr><span class="parameters">(<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">D</a>&nbsp;database,
 <a href="DatabaseAction.html" title="interface in org.dellroad.stuff.schema">DatabaseAction</a>&lt;<a href="AbstractSchemaUpdater.html" title="type parameter in AbstractSchemaUpdater">T</a>&gt;&nbsp;action)</span>
                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Execute a database action. A new transaction will be created, used, and closed.
 Delegates to <a href="#apply(T,org.dellroad.stuff.schema.DatabaseAction)"><code>apply()</code></a> for the actual execution of the action.

 <p>
 If the action or <a href="#commitTransaction(T)"><code>commitTransaction()</code></a> fails, the transaction
 is <a href="#rollbackTransaction(T)">rolled back</a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>database</code> - database to apply <code>action</code> to</dd>
<dd><code>action</code> - operation to perform</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if an error occurs while accessing the database</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
