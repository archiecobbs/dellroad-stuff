<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>FileStreamRepository (Java Class Library API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FileStreamRepository (Java Class Library API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileStreamRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/io/CSVOutput.html" title="class in org.dellroad.stuff.io"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/io/IdleTimeoutException.html" title="class in org.dellroad.stuff.io"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/io/FileStreamRepository.html" target="_top">Frames</a></li>
<li><a href="FileStreamRepository.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.dellroad.stuff.io</div>
<h2 title="Class FileStreamRepository" class="title">Class FileStreamRepository</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.dellroad.stuff.io.FileStreamRepository</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../org/dellroad/stuff/io/StreamRepository.html" title="interface in org.dellroad.stuff.io">StreamRepository</a></dd>
</dl>
<hr>
<br>
<pre>public class <a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.32">FileStreamRepository</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../org/dellroad/stuff/io/StreamRepository.html" title="interface in org.dellroad.stuff.io">StreamRepository</a></pre>
<div class="block">Provides a file-based implementation of the <a href="../../../../org/dellroad/stuff/io/StreamRepository.html" title="interface in org.dellroad.stuff.io"><code>StreamRepository</code></a> interface with
 the added feature of automated backups.

 <p>
 Atomic updates are implemented using an <a href="../../../../org/dellroad/stuff/io/AtomicUpdateFileOutputStream.html" title="class in org.dellroad.stuff.io"><code>AtomicUpdateFileOutputStream</code></a>.

 <p>
 When backups are configured, the base file must be copied, not moved, to the first backup on update to avoid
 a small window where the base file doesn't exist. This class uses <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html?is-external=true#createLink(java.nio.file.Path, java.nio.file.Path)" title="class or interface in java.nio.file">hard links</a> to perform
 this "copy" efficiently. This behavior can be altered by overriding <a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#copy(java.io.File, java.io.File)"><code>copy()</code></a> on systems not supporting
 hard links.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#FileStreamRepository(java.io.File)">FileStreamRepository</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file)</code>
<div class="block">Convenience constructor for the case where no backup copies are needed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#FileStreamRepository(java.io.File, int)">FileStreamRepository</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                                        int&nbsp;numBackups)</code>
<div class="block">Primary constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#copy(java.io.File, java.io.File)">copy</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;src,
        <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dst)</code>
<div class="block">Copy, via hard link if possible, a file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#getBackupFile(java.io.File, int)">getBackupFile</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                          int&nbsp;index)</code>
<div class="block">Generate a backup file name.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#getFile()">getFile</a></strong>()</code>
<div class="block">Get the configured <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io"><code>File</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#getFileTimestamp()">getFileTimestamp</a></strong>()</code>
<div class="block">Get the last modification timestamp of the target file as known to this instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#getInputStream()">getInputStream</a></strong>()</code>
<div class="block">Get an input stream reading the current value of the underlying store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#getNumBackups()">getNumBackups</a></strong>()</code>
<div class="block">Get the configured number of backup files.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/dellroad/stuff/io/AtomicUpdateFileOutputStream.html" title="class in org.dellroad.stuff.io">AtomicUpdateFileOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#getOutputStream()">getOutputStream</a></strong>()</code>
<div class="block">Get an output stream writing to the underlying store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#setNumBackups(int)">setNumBackups</a></strong>(int&nbsp;numBackups)</code>
<div class="block">Change the number of backup files to maintain.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FileStreamRepository(java.io.File, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FileStreamRepository</h4>
<pre>public&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.49">FileStreamRepository</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                    int&nbsp;numBackups)</pre>
<div class="block">Primary constructor.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>file</code> - the file that will store the stream content</dd><dd><code>numBackups</code> - number of backup copies to keep</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>file</code> is null</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>numBackups</code> is negative</dd></dl>
</li>
</ul>
<a name="FileStreamRepository(java.io.File)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileStreamRepository</h4>
<pre>public&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.69">FileStreamRepository</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file)</pre>
<div class="block">Convenience constructor for the case where no backup copies are needed.

 <p>
 Equivalent to:
 <blockquote><code>
  FileStreamRepository(file, 0);
 </code></blockquote></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>file</code> - the file that will store the stream content</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>public final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.78">getFile</a>()</pre>
<div class="block">Get the configured <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io"><code>File</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the file that stores the stream content (same as given to constructor)</dd></dl>
</li>
</ul>
<a name="getNumBackups()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumBackups</h4>
<pre>public final&nbsp;int&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.87">getNumBackups</a>()</pre>
<div class="block">Get the configured number of backup files.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of backup files to maintain</dd></dl>
</li>
</ul>
<a name="setNumBackups(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNumBackups</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.100">setNumBackups</a>(int&nbsp;numBackups)</pre>
<div class="block">Change the number of backup files to maintain.

 <p>
 If the number of backups is reduced, the "extra" backup files are not touched.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>numBackups</code> - number of backup files</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>numBackups</code> is less than zero</dd></dl>
</li>
</ul>
<a name="getInputStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInputStream</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.105">getInputStream</a>()
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/dellroad/stuff/io/StreamRepository.html#getInputStream()">StreamRepository</a></code></strong></div>
<div class="block">Get an input stream reading the current value of the underlying store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/dellroad/stuff/io/StreamRepository.html#getInputStream()">getInputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/dellroad/stuff/io/StreamRepository.html" title="interface in org.dellroad.stuff.io">StreamRepository</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>input containing current repository contents</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getOutputStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputStream</h4>
<pre>public&nbsp;<a href="../../../../org/dellroad/stuff/io/AtomicUpdateFileOutputStream.html" title="class in org.dellroad.stuff.io">AtomicUpdateFileOutputStream</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.110">getOutputStream</a>()
                                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/dellroad/stuff/io/StreamRepository.html#getOutputStream()">StreamRepository</a></code></strong></div>
<div class="block">Get an output stream writing to the underlying store. The underlying store is not affected until the
 returned output stream is successfully <a href="https://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true#close()" title="class or interface in java.io">closed</a>, at which time it is
 atomically updated with the newly written content.

 <p>
 If the returned stream throws an <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io"><code>IOException</code></a> at any time, including during <a href="https://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true#close()" title="class or interface in java.io"><code>close()</code></a>,
 or if <a href="https://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true#close()" title="class or interface in java.io"><code>close()</code></a> is never invoked, then no update to the underlying storage occurs.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/dellroad/stuff/io/StreamRepository.html#getOutputStream()">getOutputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/dellroad/stuff/io/StreamRepository.html" title="interface in org.dellroad.stuff.io">StreamRepository</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>output for overwriting the current repository contents</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="getFileTimestamp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFileTimestamp</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.145">getFileTimestamp</a>()</pre>
<div class="block">Get the last modification timestamp of the target file as known to this instance.

 <p>
 This returns the modification timestamp as known by this instance; it does not ask the filesystem
 for the actual last modification timestamp. So if the two are different, then the file has
 been updated by some external process. In other words, this returns the modification timestamp
 of the underlying file as it was at the time of the most recent update.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>file's last modification timestamp as known by this instance,
  or zero if the file has not yet been successfully written to</dd></dl>
</li>
</ul>
<a name="getBackupFile(java.io.File, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBackupFile</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.161">getBackupFile</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                 int&nbsp;index)</pre>
<div class="block">Generate a backup file name.

 <p>
 The implementation in <a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html" title="class in org.dellroad.stuff.io"><code>FileStreamRepository</code></a> returns a file with the same name as <code>file</code>
 plus a suffix <code>.1</code>,  <code>.2</code>, <code>.3</code>, etc. corresponding to <code>index</code>.
 Subclasses may override as desired.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>file</code> - the file that stores the current stream content (i.e., from <a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html#getFile()"><code>getFile()</code></a>)</dd><dd><code>index</code> - backup index, always greater than or equal to 1</dd>
<dt><span class="strong">Returns:</span></dt><dd>the <code>index</code>'th backup file for <code>file</code></dd></dl>
</li>
</ul>
<a name="copy(java.io.File, java.io.File)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>copy</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../src-html/org/dellroad/stuff/io/FileStreamRepository.html#line.176">copy</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;src,
        <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dst)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Copy, via hard link if possible, a file. If the two files are the same, nothing should be done.

 <p>
 The implementation in <a href="../../../../org/dellroad/stuff/io/FileStreamRepository.html" title="class in org.dellroad.stuff.io"><code>FileStreamRepository</code></a> uses <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html?is-external=true#createLink(java.nio.file.Path, java.nio.file.Path)" title="class or interface in java.nio.file">hard links</a>.
 Subclasses must override this method if the platform does not support hard links.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>src</code> - source file</dd><dd><code>dst</code> - destination file</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if unsuccessful</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileStreamRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/dellroad/stuff/io/CSVOutput.html" title="class in org.dellroad.stuff.io"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/dellroad/stuff/io/IdleTimeoutException.html" title="class in org.dellroad.stuff.io"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/dellroad/stuff/io/FileStreamRepository.html" target="_top">Frames</a></li>
<li><a href="FileStreamRepository.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
